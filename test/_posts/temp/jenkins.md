---
author_profile: true
date: 2022-01-01
title: "Docker 4 활용"
categories: 
    - CICD
tag: 
    - CI tool

# 목차
toc: true  
toc_sticky: true 
# sidebar:
#  nav: "docs"
---

# Jenkins

---

## 1. Jenkins란

- 젠킨스는 소프트웨어 개발 시 지속적으로 통합 서비스를 제공하는 툴이다.
- CI(Continuous Integration) 툴 이라고 표현한다.
- 다수의 개발자들이 하나의 프로그램을 개발할 때 버전 충돌을 방지하기 위해 각자 작업한 내용을 공유영역에 있는 저장소에 빈번히 업로드 함으로써 지속저거 통합이 가능하도록 해준다.
- 젠킨스와 같은 CI툴이 등장하기 전에는 일정한 시간마다 빌드를 실행하는 방식이 일반적
- 특히 개발자들이 당일 작성한 소스들의 커밋이 모두 끝난 심야 시간대에 이러한 빌드 타이머에 의해 집중적으로 진행되었는데. 이를 nightly-build라 한다.
- 하지만, 젠킨스는 정기적인 빌드에서 한발 나아가 Subvision(SVN), Git과 같은 버전관리 시스템과 연동하여 소스의 커밋을 감지하면 자동적으로 자동화 테스트가 포함된 빌드가 작동되도록 설정할 수 있다.

## 2. Jenkins의 장점

- 개발중인 프로젝트엫서 커밋은 매우 빈번히 일어나기 때문에 커밋 횟수만큼 빌드를 실행하는 것이 아니라 작업이 큐잉되어 자신이 실행될 차례를 기다리게 된다.
- 코드의 변경과 함께 이뤄지는 이 같은 자도오하 된 빌드와 테스트 작업들은 다음과 같은 장점이 있다.
  - 프로젝트 표준 컴파일환경에서 컴파일 오류 검출
  - 자동화 테스트 수행
  - 정적코드 분석에 의한 코딩 규약 준수 여부 체크
  - 프로파일링 툴을 이용한 소스 변경에 따른 성능 변화 감시
  - 결합 테스트 환경에 대한 배포 작업
- 각종 배치 작업의 간략화
- build 자동화의 확입(빌드 툴의 경우 Java는 maven과 Gradle이 자리잡고 있으며, 이미 빌드 관리 툴을 이용해 프로젝트를 진행하고 있다면 젠킨스와 연동이 바로 가능하다.)
- 자동화 테스트 
  - 자동화 테스트는 젠킨스를 사용해야 하는 가장 큰 이유 중 하나이며, 사실상 자동화 테스트가 포함되지 않은 빌드는 CI자체가 불가능하다. 
  - 젠킨스는 SVN, GIT과 같은 버전관리 시스템과 연동하여 코드변경을 감지하고 자동화 테스트를 수행하기 때문에 만약 개인이 미처 실시하지 못한 테스트가 있더라도 안전히 배포할 수 있도록 한다.


## 3. Jenkins 배포 과정(Spring 배포 예시)

1. SVN 또는 GIT에서 커밋된 코드르를 불러온다.
2. 불러온 코드를 Gralde, Maven과 같은 빌드 툴을 통해 빌드를 진행한다.
3. War, jar 등으로 묶인 파일을 배포하려는 서버로 scp를 통해 copy 진행
4. ssh 명령어를 통해 해당 서버 명령어 전달
   1. was(tomcat, resin 등) stop
   2. 기존에 있던 webapps 디렉터리 내 서비스 삭제
   3. war, jar로 묶인 빌드된 코드를 압축 해제 
   4. Was 재기동
5. 다른 서버 배포 필요 시 3번 과정부터 다른 서버로 재 실행